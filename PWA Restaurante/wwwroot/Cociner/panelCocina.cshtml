@{
    Layout = "~/wwwroot/Shared/_LayoutCocina.cshtml";
    ViewData["Title"] = "Panel Cocina";
}

<div class="column">
    <h3>üü¶ Nuevos (2)</h3>
    <div class="order">
        <h4>Mesa 3</h4>
        <p>Orden #2</p>
        <p class="hora">‚è∞ A las 12:20</p>
        <p>Tomado por: Leonardo</p>
        <p class="price">$4.50</p>
        <div class="order-buttons">
            <button class="btn-ver">üëÅ Ver</button>
            <button class="btn-comenzar">‚úî Comenzar</button>
        </div>
    </div>

    <div class="order">
        <h4>Mesa 4</h4>
        <p>Orden #3</p>
        <p class="hora">‚è∞ A las 12:26</p>
        <p>Tomado por: Leonardo</p>
        <p class="price">$6.50</p>
        <div class="order-buttons">
            <button class="btn-ver">üëÅ Ver</button>
            <button class="btn-comenzar">‚úî Comenzar</button>
        </div>
    </div>
</div>

<div class="column">
    <h3>üüß En Preparaci√≥n (0)</h3>
    <p class="no-orders">No hay √≥rdenes en preparaci√≥n</p>
</div>

<div class="column">
    <h3>üü© Listos (0)</h3>
    <p class="no-orders">No hay √≥rdenes listas</p>
</div>
@section Scripts {
<script>
    document.addEventListener("DOMContentLoaded", async () => {
        const token = localStorage.getItem("token");
        const usuario = JSON.parse(localStorage.getItem("usuario") || "{}");

        if (!token || usuario.rol?.toLowerCase() !== "cocinero") {
            alert("Acceso no autorizado. Inicia sesi√≥n como cocinero.");
            window.location.href = "/";
            return;
        }

        try {
            // Ejemplo de prueba: obtener pedidos enviados
            const response = await fetch("https://localhost:7209/api/Cocina/Enviados", {
                headers: {
                    "Authorization": `Bearer ${token}`
                }
            });

            if (response.status === 401) {
                alert("Sesi√≥n expirada. Inicia sesi√≥n de nuevo.");
                window.location.href = "/";
                return;
            }

            const pedidos = await response.json();
            console.log("Pedidos cargados:", pedidos);
            // Aqu√≠ podr√≠as renderizar los pedidos din√°micamente
        } catch (error) {
            console.error("Error al obtener pedidos:", error);
        }
    });
</script>
}
